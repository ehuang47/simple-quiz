<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet"
    href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
    integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
    crossorigin="anonymous">
  <style>
    body {
      margin: 20px;
    }

    * {
      text-align: center;
    }
  </style>
</head>

<body>
  <a href="/home">Take Another Quiz</a>
  <h2>{{results.title}} Quiz</h2>
  <h3 id="score" data-score="{{results.score}}">{{name}}'s Score: {{results.score}}</h3>
  <h3></h3>
  <h4>Started: {{results.start}}</h4>
  <h4>Ended: {{results.end}}</h4>
  <hr>
  <ol>
    {{#each results.questions}}
      <li>
        <div>{{this.question}}</div>
        {{#each this.choices}}
          <div>{{this}}</div>
        {{/each}}
        <div class="selection">{{this.selection}}</div>
      </li>
    {{/each}}
  </ol>

</body>
<script>
  const selections = Array.from(document.getElementsByClassName("selection"));
  for (const selected of selections) {
    selected.style = selected.innerText.split(':')[0] === "Correct" ? "background-color:palegreen" : "background-color:palevioletred";
  }

  const score = document.getElementById("score");
  if (Number(score.getAttribute('data-score')) >= 6) {
    score.nextElementSibling.innerText = "You've PASSED!!!";
    score.nextElementSibling.style = "color:palegreen";
  } else {
    score.nextElementSibling.innerText = "You've FAILED!!!";
    score.nextElementSibling.style = "color:palevioletred";
  }
</script>

</html>